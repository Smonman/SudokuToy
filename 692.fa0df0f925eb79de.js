"use strict";(self.webpackChunkSudokuToy=self.webpackChunkSudokuToy||[]).push([[692],{7692:(j,d,a)=>{a.r(d),a.d(d,{PuzzleLoaderModule:()=>$});var c=a(2271),p=a(2655),l=a(433),h=a(7579),m=a(2722),e=a(8256),_=a(2047),b=a(9489),v=a(6895),Z=a(6066),x=a(3074),T=a(9967),S=a(1383),C=a(9011);function A(o,t){1&o&&(e.TgZ(0,"app-form-error"),e._uU(1," this puzzle is not valid "),e.qZA())}function U(o,t){1&o&&(e.TgZ(0,"app-form-error"),e._uU(1," the puzzle size is required "),e.qZA())}function q(o,t){1&o&&(e.TgZ(0,"app-form-error"),e._uU(1," the puzzle size has to be larger than 1 "),e.qZA())}function P(o,t){1&o&&(e.TgZ(0,"app-form-error"),e._uU(1," the largest allowed puzzle size is 16 "),e.qZA())}function H(o,t){1&o&&(e.TgZ(0,"app-form-error"),e._uU(1," the puzzle size has to suit the puzzle "),e.qZA())}function L(o,t){1&o&&(e.TgZ(0,"app-form-error"),e._uU(1," the box width is required "),e.qZA())}function M(o,t){1&o&&(e.TgZ(0,"app-form-error"),e._uU(1," the box width has to be larger than 0 "),e.qZA())}function N(o,t){1&o&&(e.TgZ(0,"app-form-error"),e._uU(1," this box width is not valid "),e.qZA())}function k(o,t){1&o&&(e.TgZ(0,"app-form-error"),e._uU(1," this box width must be smaller than the puzzle size "),e.qZA())}function y(o,t){1&o&&(e.TgZ(0,"app-form-error"),e._uU(1," the box height is required "),e.qZA())}function I(o,t){1&o&&(e.TgZ(0,"app-form-error"),e._uU(1," the box height has to be larger than 0 "),e.qZA())}function E(o,t){1&o&&(e.TgZ(0,"app-form-error"),e._uU(1," this box height is not valid "),e.qZA())}function J(o,t){1&o&&(e.TgZ(0,"app-form-error"),e._uU(1," this box height must be smaller than the puzzle size "),e.qZA())}function B(o,t){if(1&o){const i=e.EpF();e.TgZ(0,"div",24)(1,"h2",25),e._uU(2,"Puzzle field"),e.qZA()(),e.TgZ(3,"div",26)(4,"p"),e._uU(5," Enter your Sudoku into the "),e.TgZ(6,"b"),e._uU(7,"Puzzle"),e.qZA(),e._uU(8," field as a string. Each character in the string represents one cell of the Sudoku. For empty cells, use a dot or 0. "),e.qZA(),e.TgZ(9,"p",27),e._uU(10," Complete puzzles are not a valid input. "),e.qZA(),e.TgZ(11,"h6"),e._uU(12,"Example input"),e.qZA(),e.TgZ(13,"samp",28),e._uU(14,"1...2...3...........................4...5...6...........................7...8...9"),e.qZA(),e.TgZ(15,"button",29),e.NdJ("click",function(){const n=e.CHM(i).$implicit;return e.KtG(n.close("Close click"))}),e._uU(16," Close "),e.qZA()()}}function W(o,t){if(1&o){const i=e.EpF();e.TgZ(0,"div",24)(1,"h2",25),e._uU(2,"Size field"),e.qZA()(),e.TgZ(3,"div",26)(4,"p"),e._uU(5," Enter the size of the Sudoku into the "),e.TgZ(6,"b"),e._uU(7,"Size"),e.qZA(),e._uU(8," field. The size of a Sudoku is the number of cells in one row or colum. "),e.qZA(),e.TgZ(9,"p",27),e._uU(10," Only square Sudoku are supported. "),e.qZA(),e.TgZ(11,"button",29),e.NdJ("click",function(){const n=e.CHM(i).$implicit;return e.KtG(n.close("Close click"))}),e._uU(12," Close "),e.qZA()()}}function Y(o,t){if(1&o){const i=e.EpF();e.TgZ(0,"div",24)(1,"h2",25),e._uU(2,"Box Width / Height field"),e.qZA()(),e.TgZ(3,"div",26)(4,"p"),e._uU(5," Enter the size of a Sudoku box into the corresponding "),e.TgZ(6,"b"),e._uU(7,"Box Width"),e.qZA(),e._uU(8," or "),e.TgZ(9,"b"),e._uU(10,"Box Height"),e.qZA(),e._uU(11," field. "),e.qZA(),e.TgZ(12,"button",29),e.NdJ("click",function(){const n=e.CHM(i).$implicit;return e.KtG(n.close("Close click"))}),e._uU(13," Close "),e.qZA()()}}function z(o,t){return i=>{const r=i,u=Number(r.get(o)?.value),n=Number(r.get(t)?.value);return Number.isInteger(u/n)?null:n>0&&n<=u?(r.get(t)?.setErrors({validateDivisibleBoxSize:{valid:!1}}),{validateDivisibleBoxSize:{valid:!1,controlName:t}}):null}}function f(o,t){return i=>{const r=i;return Number(r.get(o)?.value)>=Number(r.get(t)?.value)?null:(r.get(t)?.setErrors({validateMaxBoxSize:{valid:!1}}),{validateMaxBoxSize:{valid:!1,controlName:t}})}}function F(o,t){return i=>{const r=i,u=r.get(o)?.value,n=Number(r.get(t)?.value);return u?0===u.length||u.length===n*n?null:(r.get(t)?.setErrors({validateSizeMatch:{valid:!1}}),{validateSizeMatch:{valid:!1,controlName:t}}):null}}const G=[{path:"",component:(()=>{class o extends class g{constructor(){this.form=new l.nJ({}),this.submitted=!1,this.loading=!1}submit(){if(this.submitted=!0,this.form?.valid){const t=this.form.value;this.setLoading(!0),this.onValidSubmit(t)}}setLoading(t){this.loading=t,this.loading?this.form.disable():this.form.enable()}handleError(t){this.setLoading(!1),console.log(t)}hasError(t){return t?null!=this.form?.errors?.[t]&&this.submitted:!!this.form?.invalid&&this.submitted}fieldHasErrors(t,i){const r=this.form?.get(t);return this.submitted&&r?.invalid&&(!i||r?.errors?.[i])}}{constructor(i,r,u){super(),this.sudokuService=i,this.router=r,this.modalService=u,this.$destroy=new h.x}ngOnInit(){this.form=new l.cw({puzzle:new l.NI("",[l.kI.pattern("[\\.0123456789 ]*"),o=>{const t=o.value;return t&&t.length>0?t.includes(".")||t.includes("0")?null:{validatePuzzle:{valid:!1}}:null}]),puzzleSize:new l.NI(null,[l.kI.required,l.kI.min(2),l.kI.max(16)]),boxWidth:new l.NI(null,[l.kI.required,l.kI.min(1)]),boxHeight:new l.NI(null,[l.kI.required,l.kI.min(1)])},{validators:[f("puzzleSize","boxWidth"),f("puzzleSize","boxHeight"),z("puzzleSize","boxWidth"),z("puzzleSize","boxHeight"),F("puzzle","puzzleSize")]}),this.form.controls.puzzle.valueChanges.pipe((0,m.R)(this.$destroy)).subscribe(i=>{const r=Math.sqrt(i.trim().length);Number.isInteger(r)?this.form.controls.puzzleSize.patchValue(r):this.form.controls.puzzleSize.patchValue(null)}),this.form.controls.puzzleSize.valueChanges.pipe((0,m.R)(this.$destroy)).subscribe(i=>{const r=Math.sqrt(Number(i));Number.isInteger(r)?(this.form.controls.boxWidth.patchValue(r),this.form.controls.boxHeight.patchValue(r)):(this.form.controls.boxWidth.patchValue(null),this.form.controls.boxHeight.patchValue(null))})}ngOnDestroy(){this.$destroy.next(),this.$destroy.complete()}openModal(i){!this.modalService.hasOpenModals()&&i&&this.modalService.open(i,{centered:!0,scrollable:!0,modalDialogClass:"modal-content-rounded"})}onValidSubmit(i){this.sudokuService.setSize(i.puzzleSize),this.sudokuService.setBoxWidth(i.boxWidth),this.sudokuService.setBoxHeight(i.boxHeight),this.sudokuService.setHorizontalBoxCount(i.puzzleSize/i.boxWidth),this.sudokuService.setVerticalBoxCount(i.puzzleSize/i.boxHeight),this.sudokuService.setPuzzle(i.puzzle),this.router.navigateByUrl("").then()}}return o.\u0275fac=function(i){return new(i||o)(e.Y36(_.h),e.Y36(p.F0),e.Y36(b.FF))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-puzzle-loader"]],features:[e.qOj],decls:59,vars:16,consts:[[1,"d-flex","justify-content-center"],[1,"col-sm-6"],[1,"h2"],[1,"form",3,"formGroup","ngSubmit"],[1,"row","mb-3"],[1,"col-sm-9"],[1,"d-flex","flex-row","justify-content-between"],["for","puzzle-input",1,"form-label"],[3,"click"],["formControlName","puzzle","id","puzzle-input","name","puzzle","type","text",1,"form-control"],[4,"ngIf"],[1,"col-sm-3"],["for","puzzleSize-input",1,"form-label"],["formControlName","puzzleSize","id","puzzleSize-input","name","puzzleSize","type","number",1,"form-control"],[1,"col"],["for","boxWidth-input",1,"form-label"],["formControlName","boxWidth","id","boxWidth-input","name","boxWidth","type","number",1,"form-control"],["for","boxHeight-input",1,"form-label"],["formControlName","boxHeight","id","boxHeight-input","name","boxHeight","type","number",1,"form-control"],["routerLink","","type","button",1,"btn","btn-outline-secondary"],["label","Load Puzzle","type","submit",3,"disabled","loading"],["puzzleModal",""],["sizeModal",""],["boxSizeModal",""],[1,"modal-header","px-4","pt-4"],[1,"modal-title","fw-bold"],[1,"modal-body","px-4","pb-4"],[1,"note"],[1,"text-break"],["type","button",1,"btn","btn-lg","btn-primary","mt-4","w-100",3,"click"]],template:function(i,r){if(1&i){const u=e.EpF();e.TgZ(0,"app-page-layout")(1,"div",0)(2,"div",1)(3,"h1",2),e._uU(4,"New puzzle"),e.qZA(),e.TgZ(5,"form",3),e.NdJ("ngSubmit",function(){return r.submit()}),e.TgZ(6,"div",4)(7,"div",5)(8,"div",6)(9,"label",7),e._uU(10,"Puzzle:"),e.qZA(),e.TgZ(11,"app-help-button",8),e.NdJ("click",function(){e.CHM(u);const s=e.MAs(54);return e.KtG(r.openModal(s))}),e.qZA()(),e._UZ(12,"input",9),e.TgZ(13,"app-form-errors"),e.YNc(14,A,2,0,"app-form-error",10),e.qZA()(),e.TgZ(15,"div",11)(16,"div",6)(17,"label",12),e._uU(18,"Size:"),e.qZA(),e.TgZ(19,"app-help-button",8),e.NdJ("click",function(){e.CHM(u);const s=e.MAs(56);return e.KtG(r.openModal(s))}),e.qZA()(),e._UZ(20,"input",13),e.TgZ(21,"app-form-errors"),e.YNc(22,U,2,0,"app-form-error",10),e.YNc(23,q,2,0,"app-form-error",10),e.YNc(24,P,2,0,"app-form-error",10),e.YNc(25,H,2,0,"app-form-error",10),e.qZA()()(),e.TgZ(26,"div",4)(27,"div",14)(28,"div",6)(29,"label",15),e._uU(30,"Box Width:"),e.qZA(),e.TgZ(31,"app-help-button",8),e.NdJ("click",function(){e.CHM(u);const s=e.MAs(58);return e.KtG(r.openModal(s))}),e.qZA()(),e._UZ(32,"input",16),e.TgZ(33,"app-form-errors"),e.YNc(34,L,2,0,"app-form-error",10),e.YNc(35,M,2,0,"app-form-error",10),e.YNc(36,N,2,0,"app-form-error",10),e.YNc(37,k,2,0,"app-form-error",10),e.qZA()(),e.TgZ(38,"div",14)(39,"div",6)(40,"label",17),e._uU(41,"Box Height:"),e.qZA(),e.TgZ(42,"app-help-button",8),e.NdJ("click",function(){e.CHM(u);const s=e.MAs(58);return e.KtG(r.openModal(s))}),e.qZA()(),e._UZ(43,"input",18),e.TgZ(44,"app-form-errors"),e.YNc(45,y,2,0,"app-form-error",10),e.YNc(46,I,2,0,"app-form-error",10),e.YNc(47,E,2,0,"app-form-error",10),e.YNc(48,J,2,0,"app-form-error",10),e.qZA()()(),e.TgZ(49,"div",6)(50,"button",19),e._uU(51,"Cancel"),e.qZA(),e._UZ(52,"app-reactive-button",20),e.qZA()()()(),e.YNc(53,B,17,0,"ng-template",null,21,e.W1O),e.YNc(55,W,13,0,"ng-template",null,22,e.W1O),e.YNc(57,Y,14,0,"ng-template",null,23,e.W1O),e.qZA()}2&i&&(e.xp6(5),e.Q6J("formGroup",r.form),e.xp6(9),e.Q6J("ngIf",r.fieldHasErrors("puzzle","validatePuzzle")),e.xp6(8),e.Q6J("ngIf",r.fieldHasErrors("puzzleSize","required")),e.xp6(1),e.Q6J("ngIf",r.fieldHasErrors("puzzleSize","min")),e.xp6(1),e.Q6J("ngIf",r.fieldHasErrors("puzzleSize","max")),e.xp6(1),e.Q6J("ngIf",r.fieldHasErrors("puzzleSize","validateSizeMatch")),e.xp6(9),e.Q6J("ngIf",r.fieldHasErrors("boxWidth","required")),e.xp6(1),e.Q6J("ngIf",r.fieldHasErrors("boxWidth","min")),e.xp6(1),e.Q6J("ngIf",r.fieldHasErrors("boxWidth","validateDivisibleBoxSize")),e.xp6(1),e.Q6J("ngIf",r.fieldHasErrors("boxWidth","validateMaxBoxSize")),e.xp6(8),e.Q6J("ngIf",r.fieldHasErrors("boxHeight","required")),e.xp6(1),e.Q6J("ngIf",r.fieldHasErrors("boxHeight","min")),e.xp6(1),e.Q6J("ngIf",r.fieldHasErrors("boxHeight","validateDivisibleBoxSize")),e.xp6(1),e.Q6J("ngIf",r.fieldHasErrors("boxHeight","validateMaxBoxSize")),e.xp6(4),e.Q6J("disabled",r.hasError())("loading",r.loading))},dependencies:[v.O5,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.sg,l.u,p.rH,Z.w,x.A,T.A,S.$,C.i],encapsulation:2}),o})()},{path:"**",redirectTo:""}];let O=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[p.Bz.forChild(G),p.Bz]}),o})(),$=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[c.m,O]}),o})()}}]);