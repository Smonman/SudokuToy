"use strict";(self.webpackChunkSudokuToy=self.webpackChunkSudokuToy||[]).push([[592],{2047:(S,g,n)=>{n.d(g,{h:()=>m});var r=n(1135),h=n(7579),o=n(2722);class c{constructor(t,e){this.title=t,this.value=e}updateValue(t,e){e?this.value[t].includes(e)?this.value[t]=this.value[t].filter(s=>s!==e):(this.value[t]=[...this.value[t],e],this.value[t].sort()):this.value[t]=[]}}class I extends class a{constructor(t,e){this.title=t,this.value=e}updateValue(t,e){this.value[t]=e}}{constructor(t){super("Value mode",[].constructor(t*t).fill(null))}}class f extends c{constructor(t){super("Corner mode",[].constructor(t*t).fill([]))}}class v extends c{constructor(t){super("Center mode",[].constructor(t*t).fill([]))}}var p=n(8256),b=n(215);let m=(()=>{class i{constructor(e){this.timerService=e,this.size=new r.X(9),this.verticalBoxCount=new r.X(3),this.horizontalBoxCount=new r.X(3),this.boxWidth=new r.X(3),this.boxHeight=new r.X(3),this.selectedCellIds=new r.X([]),this.highlightedCellIds=new r.X([]),this.puzzle=new r.X(null),this.clearCells=new h.x,this.cellIds=[],this.inputModes=new r.X([]),this.curInputMode=new r.X(null),this.curInputModeIndex=new r.X(0),this.finished=new h.x,this.userInput=new h.x,this.$destroy=new h.x,this.$inputModes.pipe((0,o.R)(this.$destroy)).subscribe(()=>this.curInputMode.next(this.getInputModes()[this.getCurInputModeIndex()])),this.$size.pipe((0,o.R)(this.$destroy)).subscribe(s=>{this.inputModes.next([new I(s),new f(s),new v(s)])}),this.$puzzle.pipe((0,o.R)(this.$destroy)).subscribe(()=>{this.timerService.stopTimer(),this.timerService.resetTimer(),this.timerService.startTimer()}),this.$finished.pipe((0,o.R)(this.$destroy)).subscribe(()=>{this.timerService.stopTimer(),this.setSelectedCellIds([]),this.setHighlightedCellIds([])}),this.$userInput.pipe((0,o.R)(this.$destroy)).subscribe(s=>{0===s.index&&this.checkIfFinished(),this.timerService.getIsPaused()&&this.timerService.startTimer()})}get $size(){return this.size.asObservable()}get $verticalBoxCount(){return this.verticalBoxCount.asObservable()}get $horizontalBoxCount(){return this.horizontalBoxCount.asObservable()}get $boxWidth(){return this.boxWidth.asObservable()}get $boxHeight(){return this.boxHeight.asObservable()}get $selectedCellIds(){return this.selectedCellIds.asObservable()}get $puzzle(){return this.puzzle.asObservable()}get $clearCells(){return this.clearCells.asObservable()}get $highlightedCellIds(){return this.highlightedCellIds.asObservable()}get $curInputModeIndex(){return this.curInputModeIndex.asObservable()}get $curInputMode(){return this.curInputMode.asObservable()}get $inputModes(){return this.inputModes.asObservable()}get $finished(){return this.finished.asObservable()}get $userInput(){return this.userInput.asObservable()}ngOnDestroy(){this.$destroy.next(),this.$destroy.complete()}getSize(){return this.size.getValue()}getVerticalBoxCount(){return this.verticalBoxCount.getValue()}getHorizontalBoxCount(){return this.horizontalBoxCount.getValue()}getBoxWidth(){return this.boxWidth.getValue()}getBoxHeight(){return this.boxHeight.getValue()}getCurInputModeIndex(){return this.curInputModeIndex.getValue()}getInputModes(){return this.inputModes.getValue()}setSize(e){this.size.next(e)}setVerticalBoxCount(e){this.verticalBoxCount.next(e)}setHorizontalBoxCount(e){this.horizontalBoxCount.next(e)}setBoxWidth(e){this.boxWidth.next(e)}setBoxHeight(e){this.boxHeight.next(e)}setSelectedCellIds(e){this.cellIds=e,this.selectedCellIds.next(this.cellIds)}setPuzzle(e){this.setClearCells(),this.setSelectedCellIds([]),this.setHighlightedCellIds([]),this.puzzle.next(e)}setClearCells(){this.clearCells.next()}setHighlightedCellIds(e){this.highlightedCellIds.next(e)}switchInput(){this.setCurInputModeIndex((this.getCurInputModeIndex()+1)%this.getInputModes().length),this.curInputMode.next(this.getInputModes()[this.getCurInputModeIndex()])}writeToInputMode(e,s,u){this.getInputModes()[e].updateValue(s,u),this.userInput.next({index:e,id:s,value:u})}setCurInputModeIndex(e){this.curInputModeIndex.next(e),this.curInputMode.next(this.getInputModes()[e])}computeCellId(e,s){return e*this.getSize()+s}computeBoxId(e,s){return Math.floor(e/this.getBoxHeight())*this.getHorizontalBoxCount()+Math.floor(s/this.getBoxWidth())}updateSelectedCellId(e){this.cellIds.includes(e)?this.cellIds=this.cellIds.filter(s=>s!==e):this.cellIds.push(e),this.selectedCellIds.next(this.cellIds)}checkIfFinished(){const e=this.getInputModes()[0].value;for(const s of e)if(null===s)return;this.finished.next()}}return i.\u0275fac=function(e){return new(e||i)(p.LFG(b.f))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},215:(S,g,n)=>{n.d(g,{f:()=>m});var r=n(1135),h=n(7579),o=n(6063);class a extends h.x{constructor(t=1/0,e=1/0,s=o.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=s,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:s,_infiniteTimeWindow:u,_timestampProvider:l,_windowTime:d}=this;e||(s.push(t),!u&&s.push(l.now()+d)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:s,_buffer:u}=this,l=u.slice();for(let d=0;d<l.length&&!t.closed;d+=s?1:2)t.next(l[d]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:s,_infiniteTimeWindow:u}=this,l=(u?1:2)*t;if(t<1/0&&l<s.length&&s.splice(0,s.length-l),!u){const d=e.now();let C=0;for(let x=1;x<s.length&&s[x]<=d;x+=2)C=x;C&&s.splice(0,C+1)}}}var c=n(4049),I=n(5963),v=n(727),p=n(2722),b=n(8256);let m=(()=>{class i{constructor(){this.tick=new r.X(0),this.start=new a(1),this.pause=new a(1),this.stop=new a(1),this.reset=new a(1),this.isRunning=new r.X(!1),this.isPaused=new r.X(!1),this.isStopped=new r.X(!1),this.curTime=0,this.intervalTimer=function f(i=0,t=c.z){return i<0&&(i=0),(0,I.H)(i,i,t)}(1e3),this.subscription=new v.w0,this.$destroy=new h.x}get $tick(){return this.tick.asObservable()}get $start(){return this.start.asObservable()}get $pause(){return this.pause.asObservable()}get $stop(){return this.stop.asObservable()}get $reset(){return this.reset.asObservable()}get $isRunning(){return this.isRunning.asObservable()}get $isPaused(){return this.isPaused.asObservable()}get $isStopped(){return this.isStopped.asObservable()}ngOnDestroy(){this.$destroy.next(),this.$destroy.complete()}startTimer(){this.subscription=this.intervalTimer.pipe((0,p.R)(this.$destroy)).subscribe(()=>{this.curTime+=1,this.tick.next(this.curTime)}),this.start.next(),this.isRunning.next(!0),this.isPaused.next(!1),this.isStopped.next(!1)}pauseTimer(){this.subscription.unsubscribe(),this.pause.next(),this.isRunning.next(!1),this.isPaused.next(!0),this.isStopped.next(!1)}stopTimer(){this.subscription.unsubscribe(),this.stop.next(),this.isRunning.next(!1),this.isPaused.next(!1),this.isStopped.next(!0)}resetTimer(){this.curTime=0,this.tick.next(this.curTime),this.reset.next(),this.isPaused.next(!1),this.isStopped.next(!1)}getIsRunning(){return this.isRunning.value}getIsPaused(){return this.isPaused.value}getIsStopped(){return this.isStopped.value}getCurrentTime(){return this.curTime}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()}}]);